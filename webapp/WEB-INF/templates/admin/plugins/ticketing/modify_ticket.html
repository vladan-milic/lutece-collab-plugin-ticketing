<@rowBoxHeader i18nTitleKey="ticketing.modify_ticket.pageTitle">
    <form class="form-horizontal" method="post" name="modify_ticket" action="jsp/admin/plugins/ticketing/ManageTickets.jsp">
        <@messages errors=errors />
        <input type="hidden" id="id" name="id" value="${ticket.id}"/>
       <@fieldInputCombo i18nLabelKey="ticketing.modify_ticket.labelUserTitle" inputName="id_user_title" items=user_titles_list value="${ticket.idUserTitle!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelIdUserTitle.help" cssClass='' /> 
        <@fieldInputText i18nLabelKey="ticketing.modify_ticket.labelFirstname" inputName="firstname" mandatory=true value="${ticket.firstname!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelFirstname.help" />
        <@fieldInputText i18nLabelKey="ticketing.modify_ticket.labelLastname" inputName="lastname" mandatory=true value="${ticket.lastname!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelLastname.help" />
        <@fieldInputText i18nLabelKey="ticketing.modify_ticket.labelEmail" inputName="email"  value="${ticket.email!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelEmail.help" />
        <@fieldInputText i18nLabelKey="ticketing.modify_ticket.labelFixedPhoneNumber" inputName="fixed_phone_number"  value="${ticket.fixedPhoneNumber!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelFixedPhoneNumber.help" />
        <@fieldInputText i18nLabelKey="ticketing.modify_ticket.labelMobilePhoneNumber" inputName="mobile_phone_number"  value="${ticket.mobilePhoneNumber!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelMobilePhoneNumber.help" />
        <@fieldInputCombo i18nLabelKey="ticketing.modify_ticket.labelTicketType" inputName="id_ticket_type" items=ticket_types_list value="${ticket.idTicketType!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelTicketType.help" cssClass='' /> 
        <@fieldInputCombo i18nLabelKey="ticketing.modify_ticket.labelTicketDomain" inputName="id_ticket_domain" items=ticket_domains_list value="${ticket.idTicketDomain!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelTicketDomain.help" cssClass='' /> 
        <@fieldInputCombo i18nLabelKey="ticketing.modify_ticket.labelTicketCategory" inputName="id_ticket_category" items=ticket_categories_list value="${ticket.idTicketCategory!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelTicketCategory.help" cssClass='' /> 
        <@fieldInputText i18nLabelKey="ticketing.modify_ticket.labelTicketComment" inputName="ticket_comment"  value="${ticket.ticketComment!''}" i18nHelpBlockKey="ticketing.modify_ticket.labelTicketComment.help" />
 		<div id="generic_attributes">
		</div>
        <@actionButtons button1Name="action_modifyTicket" button2Name="view_manageTickets"/>
    </form>
</@rowBoxHeader>

<script src="js/plugins/ticketing/ticket_tree.js"></script>
<script>
    $(document).ready(function() {
            lutece_ticket_tree("#id_ticket_type", "#id_ticket_domain", "#id_ticket_category");
    });
	idTicketCategory.onchange=function(){
            $.ajax({
            url: "jsp/admin/plugins/ticketing/ManageTickets.jsp?view=ticketForm&id_ticket_category="+idTicketCategory.value,
            type: "GET",
            dataType : "html",
            success: function( response ) {
				$('#generic_attributes').replaceWith('<div id="generic_attributes">' + response + '</div>');
            }
            });
	};
</script>
