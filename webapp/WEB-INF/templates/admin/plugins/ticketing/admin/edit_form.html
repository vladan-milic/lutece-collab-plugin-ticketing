<#include "/admin/util/editor/editor.html" />
<#global form=form>
<#macro formEntryLine entryType label="">
	<th scope="row">
	<#assign entry = form.getEntry(entryType)>
	<#if label = "">
		${i18n('ticketing.xpage.create_ticket.'+entryType+'.label')}
	</#if>
	</th>
	<div class="form-group">
		<div class="row">
		
			</div>
			<div class="col-xs-12 col-sm-3">
				<td><input type="checkbox" name="formEntry.${entryType}.hidden" <#if entry.hidden>checked="checked"</#if>></td>
			</div>
			<div class="col-xs-12 col-sm-3">
				<td><input type="checkbox" name="formEntry.${entryType}.mandatory" <#if entry.mandatory>checked="checked"</#if>></td>
			</div>
		</div>
	</div>
	</th>
</#macro>
<div class="row">
   <div class="col-xs-12 col-sm-12 col-md-12">
      <div class="box box-solid box-primary">
         <div class="box-header">
            <h3 class="box-title">#i18n{ticketing.create_form.title}</h3>
         </div>
         <div class="box-body">
	         <div class="col-md-8">
	            <form class="form-horizontal" method="post" name="create_form" action="jsp/admin/plugins/ticketing/admin/ManageForms.jsp">
	               <@messages errors=errors />
	               	               <input type="hidden" id="id" name="id" value="${form.id}"/>
	         <@fieldInputText i18nLabelKey="ticketing.manage_viewing.labelTitle" inputName="title" mandatory=true value="${form.title!''}" i18nHelpBlockKey="ticketing.manage_viewing.labelTitle.help" /> 
    <div class="form-group"> 
      <label class="control-label col-xs-12 col-sm-3" for="confirmation_msg">#i18n{ticketing.create_contactmode.labelConfirmationMsg} : </label> 
        <div class="col-xs-12 col-sm-9"> 
          <textarea name="message" id="message" class="ticketing richtext form-control">${form.message!''}</textarea> 
          <span class="help-block">#i18n{ticketing.manage_viewing.labelMessage.help}</span>
        </div> 
    </div>   
    <@fieldInputText i18nLabelKey="ticketing.manage_viewing.labelValidationButton" inputName="buttonLabel" value="${form.buttonLabel!''}" i18nHelpBlockKey="ticketing.manage_viewing.labelValidationButton.help" /> 
				<div class="form-group">
					<label class="col-xs-12 col-sm-12 col-md-3 col-lg-3 control-label" for="mandatory">#i18n{ticketing.create_form.labelConnection}</label>
			        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
						<div class="checkbox">
							<label>
								<input type="checkbox" id="connection" name="connection" <#if form.connection>checked="checked"</#if> >
							</label>
						</div>
					</div>
				</div>      		
<table class="table">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col">Masquer/Afficher</th>
      <th scope="col">Non Obligatoire/Obligatoire</th>
    </tr>
  </thead>
  <tbody>
        		<#assign entryUserTitle = form.getEntry(formEntryType.userTitle)>
      		<#assign entryLastName = form.getEntry(formEntryType.lastName)>
      		<#assign entryFirstName = form.getEntry(formEntryType.firstName)>
      		<#assign entryEmail = form.getEntry(formEntryType.email)>
      		<#assign entryPhones = form.getEntry(formEntryType.phoneNumbers)>
      		<#assign entryContactMode = form.getEntry(formEntryType.contactMode)>
      		<#assign entryComment = form.getEntry(formEntryType.comment)>
      		      		
      		<#list formEntryType.entryTypes() as entryType>
      		  <tr>
				<@formEntryLine entryType=entryType/>
				</tr>
            </#list> 
  
    </tbody>
</table>  
            <#if form.id gt 0 > 
				<@actionButtons button1Name="action_modifyForm" button2Name="view_manageForms"/>
            <#else>
            	<@actionButtons button1Name="action_createForm" button2Name="view_manageForms"/>               	
            </#if>
	           </form>
            </div>
         </div>
      </div>
   </div>
</div>
<@initEditor />
<script type="text/javascript">

</script>