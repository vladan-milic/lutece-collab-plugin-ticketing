<div class="form-group">
	<label class="col-xs-12 col-sm-3 control-label" for="user_message">#i18n{ticketing.search_response.search} :</label>
	<div class="col-xs-11 col-sm-8">
            <textarea class="form-control"  id="query" rows = "3" placeholder="#i18n{ticketing.search_modelresponse.text.placeholder}"></textarea>
	</div>
	<div class="col-xs-1 col-sm-1 input-group-btn">
		<br/>
		<div class="btn btn-default " id="search_button" >
			<i class="fa fa-search"></i>
		</div>
	</div>
</div>
<div id="results" class="form-group">
</div>

<script>
  $( function(){
	  $("#search_button").click(function(){
		  var targetUrl="jsp/admin/plugins/ticketing/ModelResponseSearch.jsp";
		  var selectedTickets = $("input[name='selected_tickets']");
		  var strListIdParameter = "";
		  if(selectedTickets != null && selectedTickets.length != 0){
			  for(i = 0; i<selectedTickets.length; i++){
				  strListIdParameter+="&selected_tickets="+selectedTickets[i].value;
			  }
		  }
		  var dataToSend="action=search_response&searched_field=ticket_response&query="+$("#query").val()+"&category=${ticket.ticketCategory.label!}"+"&domain=${ticket.idTicketDomain!}"+strListIdParameter;
		  $.ajax({
			  url: targetUrl,
			  type: "POST",
			  data: dataToSend,
			  dataType : "html",
			  success: function( response ) {
					$('#results').replaceWith('<div id="results" class="form-group">' + response + '</div>');
			  }
		  });
	  });
  });  

</script>
