<div id="ticketing-search-wrapper">
  <div id="search-header" class="row bg-gru-dark">
    <div class="col-xs-1 col-sm-1">
      <h3>
        <a class="btn btn-back" href="jsp/admin/plugins/ticketing/ManageTickets.jsp?plugin_name=ticketing" >
          <i class="fa fa-arrow-left"></i>
        </a>
      </h3>
    </div>
    <div class="col-xs-11 col-sm-11">
      <h2></h2>
      <form class="form-inline" method="post" action="jsp/admin/plugins/ticketing/TicketSearch.jsp?action=search">
        <div class="form-group">
  				<label for="searched_field">#i18n{ticketing.search_ticket.searchType} :</label>
          <@comboWithParams name="searched_field" default_value="${searched_field!''}" additionalParameters=' class=\"form-control\"' items=search_fields_list  />
        </div>
			<div class="form-group">
				<label for="searched_field" class="sr-only">#i18n{ticketing.search_ticket.labelKeyWord} :</label>
        <div class="input-group">
				  <input class="form-control" size="50" type="text" name="query" placeholder="#i18n{ticketing.search_ticket.labelKeyWord}" value="<#if query?exists>${query}</#if>">
          <div class="input-group-btn">
				    <button class="btn btn-default " type="submit" >
					    <i class="fa fa-search"></i>
				    </button>
          </div>
        </div>
			</div>
			<#if paginator?? && paginator?has_content>
				<@pagination paginator=paginator />
				<!-- Number of feeds per page selector -->
				#i18n{ticketing.search_ticket.labelItemsPerPage} :
				<select name="items_per_page">
					<#list [ "10" , "20" , "50" , "100" ] as nb>
			  		<#if nb_items_per_page = nb >
						 <option selected="selected" value="${nb}">${nb}</option>
						<#else>
						 <option value="${nb}">${nb}</option>
						</#if>
					</#list>
				</select>
			</#if>
      </form>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 col-sm-offset-1 col-sm-10">
      <@messages errors=errors />
    </div>
  </div>
  <div id="search-content" class="row">
    <div class="col-xs-12 col-sm-offset-1 col-sm-9">
    <#if result?? && result?has_content>
        <h3>#i18n{ticketing.search_ticket.title}</h3>
        <ul class="list-group">
          <#list result as ticket>
            <li class="list-group-item">
              <a class="btn btn-link" href="jsp/admin/plugins/ticketing/TicketView.jsp?page=ticketView&view=ticketDetails&id=${ticket.id!}">
                ${ticket.title!}
              </a>
							${ticket.summary!}
            </li>
          </#list>
        </ul>
    <#else>
      <#if !errors?? && !errors?has_content >
        <div class="callout callout-warning">
    	    <h3>#i18n{ticketing.search_ticket.noResult}</h3>
        </div>
			</#if>
    </#if>
  </div>
</div>
<script>
  $( function(){
    $(".content-header").toggle();
    $("#search-header h2").append(  $(".content-header small").text() );
    // Set link on whole tr
    $("tr").on('click', function (e) {
      location.replace($(this).attr("data-url"));
    });
  });
</script>
