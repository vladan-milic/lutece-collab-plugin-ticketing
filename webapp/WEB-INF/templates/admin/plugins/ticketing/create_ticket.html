<#include "/skin/plugins/asynchronousupload/upload_commons.html" />

<@rowBoxHeader i18nTitleKey="ticketing.create_ticket.pageTitle">
    <form class="form-horizontal" method="post" name="create_ticket" action="jsp/admin/plugins/ticketing/ManageTickets.jsp" enctype="multipart/form-data">
        <@messages errors=errors />
        <input type="hidden" id="id" name="id"/>
        <input type="hidden" id="guid" name="guid" value="${ticket.guid!''}"/>
        <input type="hidden" id="customer_id" name="customer_id" value="${ticket.customerId!''}"/>
        <@fieldInputCombo i18nLabelKey="ticketing.create_ticket.labelUserTitle" inputName="id_user_title" items=user_titles_list value="${ticket.idUserTitle!''}" i18nHelpBlockKey="ticketing.create_ticket.labelIdUserTitle.help" cssClass='' /> 
        <@fieldInputText i18nLabelKey="ticketing.create_ticket.labelFirstname" inputName="firstname" mandatory=true value="${ticket.firstname!''}" i18nHelpBlockKey="ticketing.create_ticket.labelFirstname.help" />
        <@fieldInputText i18nLabelKey="ticketing.create_ticket.labelLastname" inputName="lastname" mandatory=true value="${ticket.lastname!''}" i18nHelpBlockKey="ticketing.create_ticket.labelLastname.help" />
        <@fieldInputText i18nLabelKey="ticketing.create_ticket.labelEmail" inputName="email" mandatory=true value="${ticket.email!''}" i18nHelpBlockKey="ticketing.create_ticket.labelEmail.help" />
        <@fieldInputText i18nLabelKey="ticketing.create_ticket.labelFixedPhoneNumber" inputName="fixed_phone_number"  value="${ticket.fixedPhoneNumber!''}" i18nHelpBlockKey="ticketing.create_ticket.labelFixedPhoneNumber.help" />
        <@fieldInputText i18nLabelKey="ticketing.create_ticket.labelMobilePhoneNumber" inputName="mobile_phone_number"  value="${ticket.mobilePhoneNumber!''}" i18nHelpBlockKey="ticketing.create_ticket.labelMobilePhoneNumber.help" />
        <@fieldInputCombo i18nLabelKey="ticketing.create_ticket.labelTicketType" inputName="id_ticket_type" items=ticket_types_list value="${ticket.idTicketType!''}" i18nHelpBlockKey="ticketing.create_ticket.labelTicketType.help" cssClass='' /> 
        <@fieldInputCombo i18nLabelKey="ticketing.create_ticket.labelTicketDomain" inputName="id_ticket_domain" items=ticket_domains_list value="${ticket.idTicketDomain!''}" i18nHelpBlockKey="ticketing.create_ticket.labelTicketDomain.help" cssClass='' /> 
        <@fieldInputCombo i18nLabelKey="ticketing.create_ticket.labelTicketCategory" inputName="id_ticket_category" items=ticket_categories_list value="${ticket.idTicketCategory!''}" i18nHelpBlockKey="ticketing.create_ticket.labelTicketCategory.help" cssClass='' /> 
        <@fieldInputCombo i18nLabelKey="ticketing.create_ticket.labelContactMode" inputName="id_contact_mode" items=contact_modes_list value="${ticket.idContactMode!''}" i18nHelpBlockKey="ticketing.create_ticket.labelIdContactMode.help" cssClass='' /> 
        <@fieldInputText i18nLabelKey="ticketing.create_ticket.labelTicketComment" inputName="ticket_comment"  value="${ticket.ticketComment!''}" i18nHelpBlockKey="ticketing.create_ticket.labelTicketComment.help" />
		<div class="form-group" id="generic_attributes">
		</div>
        <@actionButtons button1Name="action_recapTicket" button2Name="view_manageTickets"/>
    </form>
</@rowBoxHeader>

<script src="js/plugins/ticketing/ticket_tree.js"></script>
<script language="javascript"> 
	var category_id = ${ticket.idTicketCategory!''};
    $(document).ready(function() {
        lutece_ticket_tree("#id_ticket_type", "#id_ticket_domain", "#id_ticket_category");
    });

</script>
<@addRequiredJsFiles />
<script type="text/javascript" src="jsp/site/plugins/asynchronousupload/GetMainUploadJs.jsp?handler=ticketAsynchronousUploadHandler" ></script>
